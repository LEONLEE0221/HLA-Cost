<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>HLA Chimerism Whole Blood CD19 Cost Chart</title>
  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', system-ui, sans-serif;
      background: linear-gradient(135deg, #f5f7fa 0%, #e4edf9 100%);
      color: #2c3e50;
      padding: 30px 20px;
      min-height: 100vh;
    }

    .container {
      max-width: 720px;
      margin: 0 auto;
    }

    header {
      text-align: center;
      margin-bottom: 30px;
    }

    h1 {
      font-size: 28px;
      font-weight: 700;
      color: #1a3a6c;
      margin-bottom: 8px;
    }

    .subtitle {
      color: #5a7392;
      font-size: 16px;
    }

    .input-section {
      background: white;
      padding: 24px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.06);
      margin-bottom: 30px;
    }

    .form-row {
      display: flex;
      align-items: center;
      margin-bottom: 18px;
      gap: 16px;
    }

    label {
      font-weight: 600;
      color: #2d3748;
      width: 180px;
      font-size: 15px;
    }

    input {
      padding: 10px 14px;
      border: 1px solid #cbd5e0;
      border-radius: 8px;
      font-size: 15px;
      width: 120px;
      transition: border-color 0.2s;
    }

    input:focus {
      outline: none;
      border-color: #4299e1;
    }

    .hint {
      font-size: 13px;
      color: #718096;
      margin-left: 196px;
    }

    button {
      background: #2b6cb0;
      color: white;
      border: none;
      padding: 11px 28px;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s, transform 0.1s;
      display: block;
      margin: 0 auto;
    }

    button:hover {
      background: #2c5282;
      transform: translateY(-1px);
    }

    .result-card {
      background: white;
      border-radius: 12px;
      box-shadow: 0 6px 16px rgba(0,0,0,0.08);
      padding: 28px;
      animation: fadeIn 0.4s ease-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .result-title {
      font-size: 20px;
      font-weight: 700;
      color: #2d3748;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .result-item {
      display: flex;
      justify-content: space-between;
      padding: 12px 0;
      border-bottom: 1px dashed #edf2f7;
      font-size: 16px;
    }

    .result-item:last-child {
      border-bottom: none;
    }

    .item-label {
      display: flex;
      align-items: center;
      gap: 8px;
      color: #4a5568;
    }

    .item-value {
      font-weight: 600;
      color: #2b6cb0;
    }

    .total-row {
      margin-top: 16px;
      padding-top: 16px;
      border-top: 2px solid #e2e8f0;
    }

    .total-label {
      font-weight: 700;
      color: #2d3748;
    }

    .total-value {
      font-weight: 800;
      font-size: 22px;
      color: #c53030;
    }

    .icon {
      color: #4299e1;
    }
  </style>
</head>
<body>

  <div class="container">
    <header>
      <h1><i class="fas fa-vial icon"></i> HLA Chimerism Whole Blood CD19 Cost Chart</h1>
      <p class="subtitle">Estimate annual reagent costs based on sample volume and repeats</p>
    </header>

    <div class="input-section">
      <div class="form-row">
        <label for="samples"><i class="fas fa-users"></i> Number of Samples:</label>
        <input type="number" id="samples" value="100" min="1">
      </div>
      <div class="form-row">
        <label for="repeats"><i class="fas fa-redo"></i> Repeat Times (R):</label>
        <input type="number" id="repeats" value="2" min="0">
      </div>
      <p class="hint">Note: R = 0 means one run per sample; R = 2 means 3 runs per sample.</p>
      <button onclick="calculate()">
        <i class="fas fa-calculator"></i> Calculate Cost
      </button>
    </div>

    <div class="result-card" id="output">
      <!-- Results will appear here -->
    </div>
  </div>

  <script>
    function calculate() {
      const N = parseInt(document.getElementById("samples").value) || 0;
      const R = parseInt(document.getElementById("repeats").value) || 0;
      const T = N * (R + 1); // total runs

      const tipsCost = T * 1124.2;
      const bufferBottles = Math.ceil(20 * T / 250);
      const bufferCost = bufferBottles * 431.2;
      const kitCost = T * 10271.8;
      const totalCost = tipsCost + bufferCost + kitCost;

      const formatter = new Intl.NumberFormat('en-US', {
        style: 'decimal',
        minimumFractionDigits: 1,
        maximumFractionDigits: 1
      });

      document.getElementById("output").innerHTML = `
        <div class="result-title">
          <i class="fas fa-chart-line"></i> Cost Breakdown (HKD)
        </div>

        <div class="result-item">
          <span class="item-label"><i class="fas fa-microchip"></i> RoboSep™ Filter Tips</span>
          <span class="item-value">HKD ${formatter.format(tipsCost)}</span>
        </div>

        <div class="result-item">
          <span class="item-label"><i class="fas fa-tint"></i> RoboSep™ Buffer 1X</span>
          <span class="item-value">HKD ${formatter.format(bufferCost)} (${bufferBottles} bottle${bufferBottles !== 1 ? 's' : ''})</span>
        </div>

        <div class="result-item">
          <span class="item-label"><i class="fas fa-kit-medical"></i> EasySep™ HLA Chimerism Kit</span>
          <span class="item-value">HKD ${formatter.format(kitCost)}</span>
        </div>

        <div class="result-item total-row">
          <span class="total-label"><i class="fas fa-money-bill-wave"></i> Total Estimated Annual Cost</span>
          <span class="total-value">HKD ${formatter.format(totalCost)}</span>
        </div>
      `;
    }

    // Initial calculation on page load
    calculate();
  </script>

</body>
</html>
